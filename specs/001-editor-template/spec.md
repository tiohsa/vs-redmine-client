# Feature Specification: 新規作成エディタのテンプレート設定

**Feature Branch**: `001-editor-template`  
**Created**: 2025-12-29  
**Status**: Draft  
**Input**: User description: "新規作成時のエディタのテンプレートを設定できるようにする。メタデータも含めて新規作成時のエディタの初期値として利用できるようにする。"

## Clarifications

### Session 2025-12-29

- Q: テンプレートはどこに保存する？ → A: 設定でテンプレート用ファイルパスを指定し、その内容を読み込む
- Q: テンプレートファイルパスはどの形式を許可する？ → A: 絶対パスのみ許可する
- Q: テンプレートは全プロジェクト共通か？ → A: 全プロジェクト共通（1つだけ）
- Q: テンプレートと既存デフォルトの優先順位は？ → A: テンプレートが常に全項目を上書きする

## User Scenarios & Testing *(mandatory)*

**Constitution reminder**: Unit tests are mandatory and must be defined before
implementation. Ensure scenarios can be covered by unit tests.

### User Story 1 - 新規作成テンプレートを設定する (Priority: P1)

ユーザーは新規作成時に使うテンプレートを設定し、次回の新規作成に反映されることを確認できる。

**Why this priority**: 新規作成の入力効率と入力漏れ防止に直結するため最優先。

**Independent Test**: テンプレートを設定した後に新規作成を開き、内容が反映されることを確認できる。

**Acceptance Scenarios**:

1. **Given** ユーザーがテンプレートを設定済み, **When** 新規作成エディタを開く, **Then** テンプレート内容が初期値として表示される
2. **Given** テンプレートを更新済み, **When** 次の新規作成エディタを開く, **Then** 更新後のテンプレートが反映される

---

### User Story 2 - メタデータを含むテンプレートを使う (Priority: P2)

ユーザーはテンプレート内のメタデータ項目と本文の両方が新規作成の初期値として反映されることを確認できる。

**Why this priority**: メタデータの入力漏れを防ぎ、登録の正確性を高めるため。

**Independent Test**: メタデータを含むテンプレートで新規作成を開き、メタデータと本文の両方が初期値になることを確認できる。

**Acceptance Scenarios**:

1. **Given** メタデータを含むテンプレートが設定済み, **When** 新規作成エディタを開く, **Then** メタデータと本文が初期値として表示される

---

### Edge Cases

- テンプレートが空の場合は、空の初期値で新規作成エディタを開く
- テンプレートファイルが見つからない、または解釈できない場合は、ユーザーに通知し空の初期値で開く
- テンプレートの件名が空でも新規作成エディタは開く
- テンプレートの件名が空の場合は件名位置にカーソルを置き、`# ` を1つだけ表示する

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: システムは新規作成エディタ用のテンプレートをユーザーが設定できるようにしなければならない
- **FR-002**: システムはテンプレート用ファイルパスを設定で指定できるようにしなければならない
- **FR-003**: システムはテンプレート用ファイルパスとして絶対パスのみを受け付けなければならない
- **FR-004**: システムは新規作成エディタを開くとき、設定済みテンプレートを初期値として適用しなければならない
- **FR-005**: システムはテンプレートに含まれるメタデータ項目と本文の両方を初期値として反映しなければならない
- **FR-006**: システムはテンプレートが空または解釈不能な場合、ユーザーに通知し空の初期値で開かなければならない
- **FR-007**: システムは既存チケットの編集にはテンプレートを適用してはならない
- **FR-008**: システムはテンプレート設定を全プロジェクト共通の1つとして扱わなければならない
- **FR-009**: システムはテンプレートが設定されている場合、既存のデフォルト値よりもテンプレートを優先して適用しなければならない
- **FR-010**: システムはテンプレートの件名が空の場合でも新規作成エディタを開かなければならない
- **FR-011**: システムはテンプレートの件名が空の場合、件名行に `# ` を1つだけ表示しカーソルを件名位置に置かなければならない

### Key Entities *(include if feature involves data)*

- **新規作成テンプレート**: 新規作成エディタの初期値として使用される本文とメタデータの集合

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: テンプレート設定後、次回の新規作成エディタで初期値が反映されることを確認できる
- **SC-002**: メタデータを含むテンプレートが初期値に反映されることを確認できる
- **SC-003**: テンプレートが無効な場合でも、新規作成エディタがエラーなく開き空の初期値になる

## Assumptions

- テンプレートは新規作成のみに適用され、既存チケットの編集には影響しない
